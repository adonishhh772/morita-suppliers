<app-header></app-header>

<div class="content-reviews-section">
  <div class="padding-reviews-section">
    <div class="content-reviews-heading">
      <h1>Your opinion about our services matters the most!</h1>
    </div>

    <div class="content-reviews-body col-md-12 row">
      <div class="col-md-4 reviews-info">
        <p class="total_reviews">{{reviewCount}} reviews</p>
        <div class="icon_list">
          <mat-icon aria-hidden="false" *ngFor="let i of [0,1,2,3,4]" class="rate_icon" aria-label="Ratings">star_rate
          </mat-icon>
        </div>
        <button mat-raised-button class="review_button" color="primary" (click)="openReviewBox()">Write a
          Review</button>
      </div>

      <div class="col-md-7 reviews-list">
        <div class="col-md-12 write-a-review">
          <div class="write-body" [ngClass]="hidden">
            <h2>Write a review</h2>

            <div class="review-icons">
              <p>Score:</p>
              <div class="review-icons-list col-md-2L">
                <mat-icon aria-hidden="false" *ngFor="let icon of stars;let i=index" class="rating_icon icon_{{i}}"
                  aria-label="Ratings">{{icon.icons}}</mat-icon>
              </div>
            </div>
            <form [formGroup]="reviewForm" (ngSubmit)="postReview()">
              <div class="review-title-form">
                <div class="review-input-title pb-7">
                  <p>Title:</p>
                  <mat-form-field class="col-md-12" appearance="outline">
                    <mat-label>Title</mat-label>
                    <input formControlName="title" matInput type="text">
                    <mat-hint class="mat-error" align="start" *ngIf="isSubmitted &&errorControl.title.errors?.required">
                      Title is required.</mat-hint>
                  </mat-form-field>
                </div>
                <div class="review-input-description pb-7">
                  <p>Review:</p>
                  <mat-form-field class="col-md-12" appearance="outline">
                    <mat-label>Reviews</mat-label>
                    <textarea formControlName="description" matInput></textarea>
                    <mat-hint class="mat-error" align="start"
                      *ngIf="isSubmitted &&errorControl.description.errors?.required">
                      Description is required.</mat-hint>
                  </mat-form-field>
                </div>
              </div>
            </form>



            <div class="connect-with row">
              <!-- <div class="col-md-4">
              <p>Connect with:</p>
              <div class="all-media-auth row">
                <div class="media-connect-button twitter" #tooltip="matTooltip"
                  matTooltip="Connect with Twitter">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" class="social-icon twitter"><circle cx="24" cy="24" r="23" stroke="#78BDFB" stroke-width="1.5"></circle><path fill="#78BDFB" d="M32.589 20.01c0-.192-.004-.383-.013-.572a8.894 8.894 0 002.233-2.26 8.991 8.991 0 01-2.57.662 4.368 4.368 0 001.968-2.42 8.923 8.923 0 01-2.84 1.031 4.567 4.567 0 00-3.267-1.45 4.385 4.385 0 00-4.474 4.39c0 .35.038.69.116 1.018-3.721-.226-7.019-2.05-9.225-4.798a4.451 4.451 0 00-.605 2.253c0 1.56.79 2.947 1.99 3.765a4.476 4.476 0 01-2.027-.584v.057a4.531 4.531 0 003.59 4.434 4.485 4.485 0 01-2.02.064 4.502 4.502 0 004.18 3.136 8.965 8.965 0 01-5.557 1.905c-.361 0-.718-.023-1.068-.064a12.599 12.599 0 006.86 2.024c8.229.002 12.729-6.74 12.729-12.59z"></path></svg>
                </div>
              <div class="media-connect-button facebook" #tooltip="matTooltip"
                matTooltip="Connect with Facebook">
                  <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" class="social-icon facebook"><circle cx="24" cy="24" r="23" stroke="#78BDFB" stroke-width="1.5"></circle><path fill="#78BDFB" d="M24.349 33.914v-9.47h3.319l.524-3.138H24.35v-1.573c0-.82.285-1.6 1.533-1.6h2.496V15h-3.543c-2.978 0-3.791 1.846-3.791 4.406v1.899H19v3.14h2.044v9.47h3.305z"></path></svg>
              </div>
              <div class="media-connect-button linkedin" #tooltip="matTooltip"
                matTooltip="Connect with Linkedin">
                  <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" class="social-icon linkedin"><circle cx="24" cy="24" r="23" stroke="#78BDFB" stroke-width="1.5"></circle>
                    <path fill="#78BDFB" d="M17.076 19.108c1.296 0 2.103-.913 2.103-2.055-.024-1.166-.807-2.053-2.077-2.053S15 15.887 15 17.053c0 1.142.807 2.055 2.054 2.055h.022zM32.33 32.622v-6.816c0-3.651-1.833-5.351-4.277-5.351-1.973 0-2.856 1.154-3.35 1.963v-1.683h-3.715c.05 1.115 0 11.887 0 11.887h3.716v-6.639c0-.355.024-.71.122-.963.268-.71.88-1.445 1.905-1.445 1.346 0 1.883 1.09 1.883 2.688v6.36l3.716-.001zm-13.4-11.89v11.887h-3.716V20.732h3.715z"></path>
                  </svg>
              </div>
              <div class="media-connect-button-google" #tooltip="matTooltip"
              matTooltip="Connect with Google">
                <svg id="changeColor" fill="#78BDFB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" zoomAndPan="magnify" viewBox="0 0 375 374.9999" height="50" version="1.0"><defs><path id="pathAttribute" d="M 11.972656 11.972656 L 359.222656 11.972656 L 359.222656 359.222656 L 11.972656 359.222656 Z M 11.972656 11.972656 "></path></defs><g><path id="pathAttribute" d="M 185.597656 359.222656 C 89.675781 359.222656 11.972656 280.984375 11.972656 185.597656 C 11.972656 90.210938 89.675781 11.972656 185.597656 11.972656 C 281.519531 11.972656 359.222656 89.675781 359.222656 185.597656 C 359.222656 281.519531 280.984375 359.222656 185.597656 359.222656 Z M 185.597656 22.691406 C 95.570312 22.691406 22.691406 95.570312 22.691406 185.597656 C 22.691406 275.625 95.570312 348.503906 185.597656 348.503906 C 275.625 348.503906 348.503906 275.625 348.503906 185.597656 C 348.503906 95.570312 275.089844 22.691406 185.597656 22.691406 Z M 185.597656 22.691406 " fill-opacity="1" fill-rule="nonzero"></path></g><g id="inner-icon" transform="translate(85, 75)"> <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill="#78BDFB" class="bi bi-google" viewBox="0 0 16 16" id="IconChangeColor"> <path d="M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z" id="mainIconPathAttribute"></path> </svg> </g></svg>
              </div>
            </div>
          </div> -->
              <div class="col-md-8 row morita-feat" *ngIf="!isLogged">
                <!-- <p>OR-</p> -->

                <form class="col-md-12" [formGroup]="loginForm" (ngSubmit)="postReview()">
                  <div class="morita-login row col-md-12">
                    <div class="morita-input username">
                      <p>Username:</p>
                      <mat-form-field class="col-md-12" appearance="outline">
                        <mat-label>Username</mat-label>
                        <input formControlName="email" matInput type="text">
                        <mat-hint class="mat-error" align="start"
                          *ngIf="isSubmitted &&errorControlLogin.email.errors?.required">
                          Email is required.</mat-hint>
                        <mat-hint class="mat-error" align="start"
                          *ngIf="isSubmitted &&errorControlLogin.email.errors?.pattern">
                          Please provide valid email id.</mat-hint>
                      </mat-form-field>
                    </div>
                    <div class="morita-input password">
                      <p>Password:</p>
                      <mat-form-field class="col-md-12" appearance="outline">
                        <mat-label>Password</mat-label>
                        <input formControlName="password" matInput type="password">
                        <mat-hint class="mat-error" align="start"
                          *ngIf="isSubmitted &&errorControlLogin.password.errors?.required">
                          Password is required.</mat-hint>
                        <mat-hint align="start" class="mat-error"
                          *ngIf="isSubmitted && errorControlLogin.password.errors?.minlength">Max 8 characters
                        </mat-hint>

                      </mat-form-field>
                    </div>
                  </div>
                </form>

              </div>
            </div>
            <div class="col-md-12 row">
              <div class="col-md-8"></div>
              <div class="post-review col-md-4">
                <button mat-raised-button class="review_button" [disabled]="isDisbled" (click)="postReview()"
                  color="primary">Post</button>
              </div>
            </div>
          </div>


          <div class="all-reviews_list" *ngIf="hasReview">
            <div class="reviews" *ngFor="let reviews of allReviews">
              <div class="reviews_header col-md-12 row">
                <div class="heading_name col-md-8">
                  <p> {{reviews.client_name}}</p>
                  <div class="icon_list">
                    <mat-icon aria-hidden="false" *ngFor="let i of [0,1,2,3,4]" class="rate_icon" aria-label="Ratings">
                      star_rate</mat-icon>
                  </div>
                </div>
                <div class="heading_date col-md-4">
                  <p> {{reviews.created_date | date: 'dd/MM/yyyy'}}</p>
                </div>
              </div>
              <div class="heading_title">
                <p>{{reviews.title}}</p>
              </div>

              <div class="review_body">
                <p *ngIf="!reviews.showMore">{{trimString(reviews.description,400)}}</p>
                <p *ngIf="reviews.showMore">{{reviews.description}}</p>
                <div class="show-btn" *ngIf="reviews.description.length> 400"
                  (click)="reviews.showMore = !reviews.showMore">Show
                  <span>{{reviews.showMore ? 'Less' : 'More'}}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="no-review-section" *ngIf="!hasReview">
            <h1>No Reviews yet.</h1>
          </div>
        </div>
      </div>
    </div>
  </div>

  <app-footer></app-footer>